<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>PySGI Docs - Use</title>
</head>
<body>
    <h1 id="how-to-use">How to use</h1>
<p>This is the official documentation for using the <code>PySGI</code> library, here you will have the <strong>first steps</strong> to create a server using our library.</p>
<ul>
<li>PySGI <em>1.1.0</em> Docs</li>
</ul>
<h2 id="links">Links</h2>
<ul>
<li><a href="#how-to-use">How to use</a><ul>
<li><a href="#links">Links</a></li>
<li><a href="#creating-a-server">Creating a server</a><ul>
<li><a href="#class-pysgi">class <code>PySGI()</code></a></li>
<li><a href="#method-serverroute">method <code>server.route()</code></a></li>
<li><a href="#argument-indexrequest">argument <code>index(request)</code></a></li>
</ul>
</li>
<li><a href="#returns-a-response">Returns a response</a><ul>
<li><a href="#returning-only-the-body">Returning only the body</a></li>
<li><a href="#returning-the-body-and-status-of-the-request">Returning the body and status of the request</a></li>
<li><a href="#using-response-class">Using <code>Response</code> class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="creating-a-server">Creating a server</h2>
<p>To create a server, you need to import the <code>PySGI</code> class and the <code>Response</code> class (if you need to define content type, cookies, or headers):</p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> pysgi <span class="hljs-keyword">import</span> PySGI
<span class="hljs-keyword">from</span> pysgi <span class="hljs-keyword">import</span> Response

server = PySGI()


@server.route(<span class="hljs-string">'/'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>])
<span class="hljs-keyword">def</span> index(request):
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello World!'</span>


server.run()
</code></pre>
<p>We just created a web server. Let&#39;s see the functionality of some functions and arguments:</p>
<h3 id="class-pysgi">class <code>PySGI()</code></h3>
<p>The PySGI class has the necessary methods to create your application, being only two: <code>route()</code> and <code>run()</code>.</p>
<p>There, the routes created by you will also be registered.</p>
<h3 id="method-server-route">method <code>server.route()</code></h3>
<p>This method is responsible for registering new routes. A route name must always start with <em>&quot;/&quot;</em>, followed by the route name (eg <code>/about</code>).</p>
<p>The method has only two arguments, the first is <code>route</code>, which requires the name of the route, and the second is <code>methods</code>, which requires a list of methods accepted by this route. The default accepted method is <strong>GET</strong>, but you can define them in a list.</p>
<p>Method names must be defined in uppercase, for example: <strong>GET</strong>, <strong>POST</strong>, <strong>PUT</strong>, <strong>DELETE</strong> and others.</p>
<pre><code class="lang-python">@<span class="hljs-keyword">server</span>.<span class="hljs-keyword">route</span>('/<span class="hljs-keyword">user</span>', methods=[<span class="hljs-string">'DELETE'</span>, <span class="hljs-string">'POST'</span>])
</code></pre>
<h3 id="argument-index-request">argument <code>index(request)</code></h3>
<p>The <code>request</code> argument has information about the client&#39;s request, such as headers, cookies, requested method and route, and URL arguments (or parameters).</p>
<p>This argument is <code>optional</code>, you can put it or not, if you need it, it will be available.</p>
<blockquote>
<p>A question... How does PySGI know if the request argument is there? Simple, with one exception, if the <code>TypeError</code> exception is thrown, we will try again to call the function, but without passing the argument.</p>
</blockquote>
<p>You can access the data as you access an attribute (eg request.method). Cookies and headers are like dictionaries.</p>
<pre><code class="lang-python">request.method  # request <span class="hljs-function"><span class="hljs-keyword">method</span>
<span class="hljs-title">request</span>.<span class="hljs-title">cookies</span>  # <span class="hljs-title">request</span> <span class="hljs-title">cookies</span>
<span class="hljs-title">request</span>.<span class="hljs-title">headers</span>  # <span class="hljs-title">request</span> <span class="hljs-title">headers</span></span>
</code></pre>
<h2 id="returns-a-response">Returns a response</h2>
<p>There are two three ways to return a response to the client, let&#39;s see some:</p>
<h3 id="returning-only-the-body">Returning only the body</h3>
<p>Use this only for simpler requests, the default HTTP status code will be 200.</p>
<pre><code class="lang-python">@server.route(<span class="hljs-string">'/'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>])
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span></span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello World'</span>  <span class="hljs-comment"># returning only the body</span>
</code></pre>
<h3 id="returning-the-body-and-status-of-the-request">Returning the body and status of the request</h3>
<p>That way you can return the body and status of the request:</p>
<pre><code class="lang-python">@server.route(<span class="hljs-string">'/'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>])
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span></span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello World'</span>, <span class="hljs-number">200</span>  <span class="hljs-comment"># returning the body and status</span>
</code></pre>
<h3 id="using-response-class">Using <code>Response</code> class</h3>
<p>Using this class you can have a much more detailed answer by setting body, cookies, headers, content type and status.</p>
<pre><code class="lang-python">@server.route(<span class="hljs-string">'/'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>])
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span></span>:
    <span class="hljs-keyword">return</span> Response(<span class="hljs-string">'Hello World'</span>, content_type=<span class="hljs-string">'text/plain'</span>)
</code></pre>
<p>To set cookies and headers (setting their name and value):</p>
<pre><code class="lang-python">@server.route(<span class="hljs-string">'/'</span>, methods=[<span class="hljs-string">'GET'</span>, <span class="hljs-string">'POST'</span>])
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span></span>:
    response = Response(<span class="hljs-string">'Hello World'</span>, content_type=<span class="hljs-string">'text/plain'</span>)

    <span class="hljs-comment"># cookies</span>
    response.set_cookie(<span class="hljs-string">'Auth'</span>, <span class="hljs-string">'utokenAuth123'</span>)

    <span class="hljs-comment"># headers</span>
    response.set_header(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">'utokenAuth123'</span>)
</code></pre>
</body>
</html>